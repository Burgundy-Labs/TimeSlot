@()

@main("Account", "Manage Account") {
    <h1>User Information: </h1>
    @UserController.getCurrentUser.getDisplayName
    <br/>
    @UserController.getCurrentUser.getEmail
    <br/>
    @UserController.getCurrentUser.getUid
    <br/>
    @UserController.getCurrentUser.getRole
    <br/>

    <h1>Availability Schedule</h1>
    <div class="col-md-6">
        <div id='availabilitySchedule'></div>
    </div>

    <script>
            $(document).ready(function() {
                var events = [];
                $('#availabilitySchedule').fullCalendar({
                    minTime: "10:00",
                    maxTime: "21:00",
                    weekends: false,
                    editable: true,
                    selectable: true,
                    defaultDate: moment().startOf('isoWeek'),
                    defaultView: 'agendaWeek',
                    navLinks: true, // can click day/week names to navigate views
                    eventLimit: true, // allow "more" link when too many events,
                    select: function (start, end, jsEvent, view) {
                        var newEvent = {};
                        newEvent.title = "Available";
                        newEvent.start = moment(start).format();
                        newEvent.end = moment(end).format();
                        $.confirm({
                            title: 'Availability',
                            content: 'Is this available slot weekly?',
                            theme: 'modern',
                            buttons: {
                                yes: {
                                    text: 'Yes, weekly',
                                    btnClass: 'btn-primary',
                                    keys: ['enter', 'shift'],
                                    action: function(){
                                       newEvent.dow = [moment(start).isoWeekday()];
                                        events.push(newEvent);
                                        console.log(events);
                                        $('#availabilitySchedule').fullCalendar('renderEvent', newEvent);
                                    }
                                },
                                no: {
                                    text: 'No, one-time',
                                    btnClass: 'btn-primary',
                                    action: function(){
                                        events.push(newEvent);
                                        console.log(events);
                                        $('#availabilitySchedule').fullCalendar('renderEvent', newEvent);
                                    }
                                },
                                cancel: {
                                    text: 'Cancel Creating Availability',
                                    action: function(){
                                        console.log(events);

                                    }
                                }
                            }
                        });
                    }
                })
            });
    </script>

}




