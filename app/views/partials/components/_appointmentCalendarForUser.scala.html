<script type="text/javascript">
/*
    Bug: FullCalendar won't load up a Calendar control if it's not on a displayed page.
         Since the calendar isn't loaded when the page loads, but after you click the tab for it, the calendar doesn't show up.
    Fixed: 10/26
    Solution: The best solution I could find that other people used was to make the calendar creation into a function, and keep trying to load the
              calendar. It will only load, however, when the calendar ID is visible on the page.
 */
$(document).ready(function() {
    if (window.location.pathname == "/Appointments") {
        createAppointmentCalendar();
    } if (window.location.pathname == "/MakeAppointment") {
        createMakeAppointmentCalendar();
    }
});
function createAppointmentCalendar () {
    if ($('#calendar').is(':visible')) { //if the container is visible on the page
        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,basicWeek,basicDay'
            },
            defaultDate: '2017-10-12',
            navLinks: true, // can click day/week names to navigate views
            editable: true,
            eventLimit: true, // allow "more" link when too many events
            events: [
                {
                    title: 'All Day Event',
                    start: '2017-10-01'
                },
                {
                    title: 'Long Event',
                    start: '2017-10-07',
                    end: '2017-10-10'
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: '2017-10-09T16:00:00'
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: '2017-10-16T16:00:00'
                },
                {
                    title: 'Conference',
                    start: '2017-10-11',
                    end: '2017-10-13'
                },
                {
                    title: 'Meeting',
                    start: '2017-10-12T10:30:00',
                    end: '2017-10-12T12:30:00'
                },
                {
                    title: 'Lunch',
                    start: '2017-10-12T12:00:00'
                },
                {
                    title: 'Meeting',
                    start: '2017-10-12T14:30:00'
                },
                {
                    title: 'Happy Hour',
                    start: '2017-10-12T17:30:00'
                },
                {
                    title: 'Dinner',
                    start: '2017-10-12T20:00:00'
                },
                {
                    title: 'Birthday Party',
                    start: '2017-10-13T07:00:00'
                },
                {
                    title: 'Click for Google',
                    url: 'http://google.com/',
                    start: '2017-10-28'
                }
            ],
            eventClick: function (event) {
                $("#eventName").text(event.title); // Getting Event Title

                // Getting Start Date and Time
                var start = event.start.format().split('T');
                var startDate = getMonth(start[0].split('-')[1]) + " " + start[0].split('-')[2] + ", " + start[0].split('-')[0];
                var startTime = "00:00";
                if (start.length >= 2) {
                    startTime = start[1].split(':')[0] + ":" + start[1].split(':')[1];
                }
                $("#eventStart").text("Start: " + startTime + " on " + startDate);

                // Getting End Date and Time
                $("#eventEnd").text("");
                if (event.end) {
                    var end = event.end.format().split('T');
                    var endDate = getMonth(end[0].split('-')[1]) + " " + end[0].split('-')[2] + ", " + end[0].split('-')[0];
                    var endTime = "00:00";
                    if (start.length >= 2) {
                        endTime = end[1].split(':')[0] + ":" + end[1].split(':')[1];
                    }
                    $("#eventEnd").text("End: " + endTime + " on " + endDate);
                }

                // Getting Appointment Information
                $("#student").text("Student Name: TO DO");
                $("#studentID").text("Student ID: TO DO");
                $("#notes").text("Notes: TO DO");
            }
        });
    } else {
        setTimeout(createCalendar, 50); //wait 50 ms, then try again
    }
};
function getMonth(month) {
    switch(month) {
        case "1":
            return "January";
            break;
        case "2":
            return "February";
            break;
        case "3":
            return "March";
            break;
        case "4":
            return "April";
            break;
        case "5":
            return "May";
            break;
        case "6":
            return "June";
            break;
        case "7":
            return "July";
            break;
        case "8":
            return "August";
            break;
        case "9":
            return "September";
            break;
        case "10":
            return "October";
            break;
        case "11":
            return "November";
            break;
        case "12":
            return "December";
            break;
        default:
            return "uh oh";
            break;
    }
}
function createMakeAppointmentCalendar () {
    if ($('#calendar').is(':visible')) { //if the container is visible on the page
        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next',
                center: 'title',
            },
            defaultDate: moment().startOf('isoWeek'),
            defaultView: 'agendaWeek',
            navLinks: true, // can click day/week names to navigate views
            editable: true,
            weekends: false,
            eventLimit: true, // allow "more" link when too many events
            events: [
                {
                    title: 'All Day Event',
                    start: '2017-10-01'
                },
                {
                    title: 'Long Event',
                    start: '2017-10-07',
                    end: '2017-10-10'
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: '2017-10-09T16:00:00'
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: '2017-10-16T16:00:00'
                },
                {
                    title: 'Conference',
                    start: '2017-10-11',
                    end: '2017-10-13'
                },
                {
                    title: 'Meeting',
                    start: '2017-10-12T10:30:00',
                    end: '2017-10-12T12:30:00'
                },
                {
                    title: 'Lunch',
                    start: '2017-10-12T12:00:00'
                },
                {
                    title: 'Meeting',
                    start: '2017-10-12T14:30:00'
                },
                {
                    title: 'Happy Hour',
                    start: '2017-10-12T17:30:00'
                },
                {
                    title: 'Dinner',
                    start: '2017-10-12T20:00:00'
                },
                {
                    title: 'Birthday Party',
                    start: '2017-10-13T07:00:00'
                },
                {
                    title: 'Click for Google',
                    url: 'http://google.com/',
                    start: '2017-10-28'
                }
            ],
            eventClick: function (event) {
                $("#eventName").text(event.title); // Getting Event Title

                // Getting Start Date and Time
                var start = event.start.format().split('T');
                var startDate = getMonth(start[0].split('-')[1]) + " " + start[0].split('-')[2] + ", " + start[0].split('-')[0];
                var startTime = "00:00";
                if (start.length >= 2) {
                    startTime = start[1].split(':')[0] + ":" + start[1].split(':')[1];
                }
                $("#eventStart").text("Start: " + startTime + " on " + startDate);

                // Getting End Date and Time
                $("#eventEnd").text("");
                if (event.end) {
                    var end = event.end.format().split('T');
                    var endDate = getMonth(end[0].split('-')[1]) + " " + end[0].split('-')[2] + ", " + end[0].split('-')[0];
                    var endTime = "00:00";
                    if (start.length >= 2) {
                        endTime = end[1].split(':')[0] + ":" + end[1].split(':')[1];
                    }
                    $("#eventEnd").text("End: " + endTime + " on " + endDate);
                }

                // Getting Appointment Information
                $("#student").text("Student Name: TO DO");
                $("#studentID").text("Student ID: TO DO");
                $("#notes").text("Notes: TO DO");
            }
        });
    } else {
        setTimeout(createCalendar, 50); //wait 50 ms, then try again
    }
};
</script>
<div class="row">
    <div class="col-md-6">
        <div id='calendar'></div>
    </div>
    <div class="col-md-6" id="eventInformation">
        <h4 id="eventName"></h4>
        <ul style="list-style: none; margin-left: -38px">
            <li id="eventStart"></li>
            <li id="eventEnd"></li>
            <li id="student"></li>
            <li id="studentID"></li>
            <li id="notes"></li>
        </ul>
    </div>
</div>